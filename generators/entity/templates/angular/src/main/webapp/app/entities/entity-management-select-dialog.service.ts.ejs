import { Injectable } from '@angular/core';
import { Router } from '@angular/router';
import { I<%= entityAngularName %> } from 'app/shared/model/<%= entityModelFileName %>.model';

@Injectable()
export class <%= entityAngularName %>SelectDialogService {
    public selected: Array<I<%= entityAngularName %>>;
    private callback: Function;

    constructor(private router: Router) {
        this.selected = [];
    }

    subscribe(selected: Array<I<%= entityAngularName %>>, callback: Function) {
        this.selected = [...(selected || [])];
        this.callback = callBack;
        this.router.navigate([
                {
                    outlets:
                        {
                            popup: `<%= entityModelFileName %>/select`
                        }
                }
            ]
        );
    }

    submit(selected: Array<I<%= entityAngularName %>>) {
        this.router.navigate([{ outlets: { popup: null } }]).then(() => {
            if (this.callback) {
                this.callback(selected);
            }
        });
    }

    close() {
        this.router.navigate([{ outlets: { popup: null } }]);
    }
}
